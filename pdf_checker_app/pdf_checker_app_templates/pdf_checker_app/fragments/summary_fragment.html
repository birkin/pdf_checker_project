{% comment %}
OpenRouter summary fragment.
Shows the LLM-generated summary when available.
{% endcomment %}

{% if suggestions and suggestions.status == 'completed' and suggestions.summary_text %}
<div id="summary-container" class="summary-section">
    <h2>Accessibility Improvement Suggestions</h2>
    <div class="summary-content">
        {{ suggestions.summary_text|linebreaks }}
    </div>
    {% if suggestions.model %}
    <p class="summary-meta">Generated by {{ suggestions.model }}</p>
    {% endif %}
</div>

{% elif suggestions and suggestions.status == 'processing' %}
<div id="summary-container" class="summary-section status-processing"
     hx-get="{% url 'summary_fragment_url' pk=document.pk %}"
     hx-trigger="every 3s"
     hx-swap="outerHTML">
    <h2>Accessibility Improvement Suggestions</h2>
    <p>Generating suggestions... please wait.</p>
</div>

{% elif suggestions and suggestions.status == 'failed' %}
<div id="summary-container" class="summary-section status-failed">
    <h2>Accessibility Improvement Suggestions</h2>
    <p>Suggestion generation failed. Please try again later.</p>
</div>

{% elif suggestions and suggestions.status == 'pending' %}
<div id="summary-container" class="summary-section status-pending"
     hx-get="{% url 'summary_fragment_url' pk=document.pk %}"
     hx-trigger="every 3s"
     hx-swap="outerHTML">
    <h2>Accessibility Improvement Suggestions</h2>
    <p>Suggestions queued for generation...</p>
</div>

{% else %}
<div id="summary-container" class="summary-section">
    <h2>Accessibility Improvement Suggestions</h2>
    <p>Suggestions coming soon.</p>
</div>
{% endif %}
