{% comment %}
OpenRouter summary fragment.
Shows the LLM-generated summary when available.
{% endcomment %}

{% if summary and summary.status == 'completed' and summary.summary_text %}
<div id="summary-container" class="summary-section">
    <h2>Accessibility Summary</h2>
    <div class="summary-content">
        {{ summary.summary_text|linebreaks }}
    </div>
    {% if summary.model %}
    <p class="summary-meta">Generated by {{ summary.model }}</p>
    {% endif %}
</div>

{% elif summary and summary.status == 'processing' %}
<div id="summary-container" class="summary-section status-processing"
     hx-get="{% url 'summary_fragment_url' pk=document.pk %}"
     hx-trigger="every 3s"
     hx-swap="outerHTML">
    <h2>Accessibility Summary</h2>
    <p>Generating summary... please wait.</p>
</div>

{% elif summary and summary.status == 'failed' %}
<div id="summary-container" class="summary-section status-failed">
    <h2>Accessibility Summary</h2>
    <p>Summary generation failed. Please try again later.</p>
</div>

{% elif summary and summary.status == 'pending' %}
<div id="summary-container" class="summary-section status-pending"
     hx-get="{% url 'summary_fragment_url' pk=document.pk %}"
     hx-trigger="every 3s"
     hx-swap="outerHTML">
    <h2>Accessibility Summary</h2>
    <p>Summary queued for generation...</p>
</div>

{% else %}
<div id="summary-container" class="summary-section">
    <h2>Accessibility Summary</h2>
    <p>Summary coming soon.</p>
</div>
{% endif %}
